<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Èü≥Ê•ΩÁµåÈ®ì„Ç¢„É≥„Ç±„Éº„Éà</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        .questionnaire-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .question {
            background-color: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .question h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }
        
        .option {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            padding: 15px 20px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 400px;
            max-width: 90%;
        }
        
        .option:hover {
            border-color: #007bff;
            background-color: #e3f2fd;
        }
        
        .option.selected {
            border-color: #007bff;
            background-color: #007bff;
            color: white;
        }
        
        .option input[type="radio"] {
            display: none;
        }
        
        .option-value {
            font-weight: bold;
            font-size: 18px;
            margin-right: 15px;
        }
        
        .option-label {
            font-size: 14px;
            text-align: left;
            line-height: 1.2;
            flex: 1;
        }
        
        .submit-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .submit-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .submit-button:hover {
            background-color: #218838;
        }
        
        .submit-button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .progress {
            background-color: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            background-color: #007bff;
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        
        @media (max-width: 600px) {
            .option {
                width: 100%;
                max-width: 100%;
                padding: 15px;
            }
            
            .option-value {
                margin-right: 10px;
                font-size: 16px;
            }
            
            .option-label {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="questionnaire-container">
        <h1>üéµ Èü≥Ê•ΩÁµåÈ®ì„Ç¢„É≥„Ç±„Éº„Éà üéµ</h1>
        <p>ÂÆüÈ®ì„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅÊúÄÂæå„Å´„ÄÅ„ÅÇ„Å™„Åü„ÅÆÈü≥Ê•ΩÁµåÈ®ì„Å´„Å§„ÅÑ„Å¶Á∞°Âçò„Å™„Ç¢„É≥„Ç±„Éº„Éà„Å´„ÅäÁ≠î„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
        </div>
        
        <form id="questionnaireForm">
            <!-- Question 1 -->
            <div class="question">
                <h3>Q1. Ëá™ÂàÜ„ÅÆÈü≥Ê•ΩÁöÑÊâçËÉΩ„ÇÑÈü≥Ê•ΩÊºîÂ•è„ÇíË§í„ÇÅ„Çâ„Çå„Åü„Åì„Å®„Åå„ÅÇ„Çã</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(1, 1, this)">
                        <input type="radio" name="q1" value="1">
                        <span class="option-value">1</span>
                        <span class="option-label">ÂÖ®„Åè„Å™„ÅÑ</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 2, this)">
                        <input type="radio" name="q1" value="2">
                        <span class="option-value">2</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 3, this)">
                        <input type="radio" name="q1" value="3">
                        <span class="option-value">3</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 4, this)">
                        <input type="radio" name="q1" value="4">
                        <span class="option-value">4</span>
                        <span class="option-label">„Å©„Å°„Çâ„Åß„ÇÇ„Å™„ÅÑ</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 5, this)">
                        <input type="radio" name="q1" value="5">
                        <span class="option-value">5</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 6, this)">
                        <input type="radio" name="q1" value="6">
                        <span class="option-value">6</span>
                    </label>
                    <label class="option" onclick="selectOption(1, 7, this)">
                        <input type="radio" name="q1" value="7">
                        <span class="option-value">7</span>
                        <span class="option-label">„Çà„Åè„ÅÇ„Çã</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 2 -->
            <div class="question">
                <h3>Q2. ÁßÅ„ÅØÈü≥Ê•ΩÂÆ∂„Åß„ÅÇ„Çã</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(2, 1, this)">
                        <input type="radio" name="q2" value="1">
                        <span class="option-value">1</span>
                        <span class="option-label">ÂÖ®„ÅèÈÅï„ÅÜ</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 2, this)">
                        <input type="radio" name="q2" value="2">
                        <span class="option-value">2</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 3, this)">
                        <input type="radio" name="q2" value="3">
                        <span class="option-value">3</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 4, this)">
                        <input type="radio" name="q2" value="4">
                        <span class="option-value">4</span>
                        <span class="option-label">„Å©„Å°„Çâ„Åß„ÇÇ„Å™„ÅÑ</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 5, this)">
                        <input type="radio" name="q2" value="5">
                        <span class="option-value">5</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 6, this)">
                        <input type="radio" name="q2" value="6">
                        <span class="option-value">6</span>
                    </label>
                    <label class="option" onclick="selectOption(2, 7, this)">
                        <input type="radio" name="q2" value="7">
                        <span class="option-value">7</span>
                        <span class="option-label">„Åù„ÅÆÈÄö„Çä</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 3 -->
            <div class="question">
                <h3>Q3. ÁßÅ„ÅØ„Åì„ÅìÔºøÔºøÂπ¥Èñì„ÄÅÊó•Â∏∏ÁöÑ„ÉªÂÆöÊúüÁöÑ„Å´Ê•ΩÂô®ÔºàÊ≠å„ÇíÂê´„ÇÄÔºâ„ÅÆÁ∑¥Áøí„Çí„Åó„Å¶„ÅÑ„Çã</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(3, 1, this)">
                        <input type="radio" name="q3" value="1">
                        <span class="option-value">0Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 2, this)">
                        <input type="radio" name="q3" value="2">
                        <span class="option-value">1Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 3, this)">
                        <input type="radio" name="q3" value="3">
                        <span class="option-value">2Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 4, this)">
                        <input type="radio" name="q3" value="4">
                        <span class="option-value">3Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 5, this)">
                        <input type="radio" name="q3" value="5">
                        <span class="option-value">4-5Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 6, this)">
                        <input type="radio" name="q3" value="6">
                        <span class="option-value">6-9Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(3, 7, this)">
                        <input type="radio" name="q3" value="7">
                        <span class="option-value">10Âπ¥‰ª•‰∏ä</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 4 -->
            <div class="question">
                <h3>Q4. ËààÂë≥„ÅåÊúÄ„ÇÇÈ´ò„Åã„Å£„ÅüÊôÇÊúü„Å´„ÅØ„ÄÅ„É°„Ç§„É≥„ÅÆÊ•ΩÂô®ÔºàÊ≠å„ÇíÂê´„ÇÄÔºâ„Çí‰∏ÄÊó•„Å´ÔºøÔºøÊôÇÈñìÁ∑¥Áøí„Åó„Åü</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(4, 1, this)">
                        <input type="radio" name="q4" value="1">
                        <span class="option-value">0ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 2, this)">
                        <input type="radio" name="q4" value="2">
                        <span class="option-value">0.5ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 3, this)">
                        <input type="radio" name="q4" value="3">
                        <span class="option-value">1ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 4, this)">
                        <input type="radio" name="q4" value="4">
                        <span class="option-value">1.5ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 5, this)">
                        <input type="radio" name="q4" value="5">
                        <span class="option-value">2ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 6, this)">
                        <input type="radio" name="q4" value="6">
                        <span class="option-value">3-4ÊôÇÈñì</span>
                    </label>
                    <label class="option" onclick="selectOption(4, 7, this)">
                        <input type="radio" name="q4" value="7">
                        <span class="option-value">5ÊôÇÈñì‰ª•‰∏ä</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 5 -->
            <div class="question">
                <h3>Q5. Èü≥Ê•ΩÁêÜË´ñ„ÅÆË®ìÁ∑¥„ÇíÔºøÔºøÂπ¥ÈñìÂèó„Åë„Åü</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(5, 1, this)">
                        <input type="radio" name="q5" value="1">
                        <span class="option-value">0Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 2, this)">
                        <input type="radio" name="q5" value="2">
                        <span class="option-value">0.5Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 3, this)">
                        <input type="radio" name="q5" value="3">
                        <span class="option-value">1Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 4, this)">
                        <input type="radio" name="q5" value="4">
                        <span class="option-value">2Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 5, this)">
                        <input type="radio" name="q5" value="5">
                        <span class="option-value">3Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 6, this)">
                        <input type="radio" name="q5" value="6">
                        <span class="option-value">4-6Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(5, 7, this)">
                        <input type="radio" name="q5" value="7">
                        <span class="option-value">7Âπ¥‰ª•‰∏ä</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 6 -->
            <div class="question">
                <h3>Q6. „Åì„Çå„Åæ„Åß„Å´Ê•ΩÂô®ÔºàÊ≠å„ÇÇÂê´„ÇÄÔºâ„ÅÆÊ≠£Âºè„Å™Ë®ìÁ∑¥„ÇíÔºøÔºøÂπ¥ÈñìÂèó„Åë„Åü</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(6, 1, this)">
                        <input type="radio" name="q6" value="1">
                        <span class="option-value">0Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 2, this)">
                        <input type="radio" name="q6" value="2">
                        <span class="option-value">0.5Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 3, this)">
                        <input type="radio" name="q6" value="3">
                        <span class="option-value">1Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 4, this)">
                        <input type="radio" name="q6" value="4">
                        <span class="option-value">2Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 5, this)">
                        <input type="radio" name="q6" value="5">
                        <span class="option-value">3-5Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 6, this)">
                        <input type="radio" name="q6" value="6">
                        <span class="option-value">6-9Âπ¥</span>
                    </label>
                    <label class="option" onclick="selectOption(6, 7, this)">
                        <input type="radio" name="q6" value="7">
                        <span class="option-value">10Âπ¥‰ª•‰∏ä</span>
                    </label>
                </div>
            </div>
            
            <!-- Question 7 -->
            <div class="question">
                <h3>Q7. ÁßÅ„ÅØÔºøÔºøÁ®ÆÈ°û„ÅÆÊ•ΩÂô®„ÇíÊºîÂ•è„Åß„Åç„Çã</h3>
                <div class="options">
                    <label class="option" onclick="selectOption(7, 1, this)">
                        <input type="radio" name="q7" value="1">
                        <span class="option-value">0Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 2, this)">
                        <input type="radio" name="q7" value="2">
                        <span class="option-value">1Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 3, this)">
                        <input type="radio" name="q7" value="3">
                        <span class="option-value">2Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 4, this)">
                        <input type="radio" name="q7" value="4">
                        <span class="option-value">3Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 5, this)">
                        <input type="radio" name="q7" value="5">
                        <span class="option-value">4Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 6, this)">
                        <input type="radio" name="q7" value="6">
                        <span class="option-value">5Á®ÆÈ°û</span>
                    </label>
                    <label class="option" onclick="selectOption(7, 7, this)">
                        <input type="radio" name="q7" value="7">
                        <span class="option-value">6Á®ÆÈ°û‰ª•‰∏ä</span>
                    </label>
                </div>
            </div>
            
            <div class="submit-container">
                <button type="button" class="submit-button" id="submitButton" onclick="submitQuestionnaire()" disabled>
                    ÂõûÁ≠î„ÇíÈÄÅ‰ø°
                </button>
            </div>
        </form>
    </div>

    <script>
        let answers = {};
        let totalQuestions = 7;
        
        function selectOption(questionNum, value, element) {
            // Âêå„ÅòË≥™Âïè„ÅÆ‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÈùûÈÅ∏ÊäûÁä∂ÊÖã„Å´
            const questionName = `q${questionNum}`;
            const allOptions = document.querySelectorAll(`input[name="${questionName}"]`).forEach(input => {
                input.parentElement.classList.remove('selected');
            });
            
            // ÈÅ∏Êäû„Åï„Çå„ÅüÈÅ∏ÊäûËÇ¢„ÇíÈÅ∏ÊäûÁä∂ÊÖã„Å´
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // ÂõûÁ≠î„ÇíË®òÈå≤
            answers[questionName] = value;
            
            // ÈÄ≤Êçó„Éê„Éº„ÇíÊõ¥Êñ∞
            updateProgress();
            
            // ÂÖ®ÂïèÂõûÁ≠îÊ∏à„Åø„Åã„ÉÅ„Çß„ÉÉ„ÇØ
            checkAllAnswered();
        }
        
        function updateProgress() {
            const answered = Object.keys(answers).length;
            const progress = (answered / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function checkAllAnswered() {
            const submitButton = document.getElementById('submitButton');
            if (Object.keys(answers).length === totalQuestions) {
                submitButton.disabled = false;
                submitButton.style.backgroundColor = '#28a745';
            } else {
                submitButton.disabled = true;
                submitButton.style.backgroundColor = '#6c757d';
            }
        }
        
        function submitQuestionnaire() {
            if (Object.keys(answers).length !== totalQuestions) {
                alert('„Åô„Åπ„Å¶„ÅÆË≥™Âïè„Å´ÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            // ÈÄÅ‰ø°„Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = true;
            submitButton.textContent = 'ÈÄÅ‰ø°‰∏≠...';
            
            // „Çµ„Éº„Éê„Éº„Å´ÂõûÁ≠î„ÇíÈÄÅ‰ø°
            fetch('/submit_questionnaire', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(answers)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('„Ç¢„É≥„Ç±„Éº„Éà„ÅÆÂõûÁ≠î„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åó„ÅüÔºÅ');
                    window.location.href = '/complete';
                } else {
                    alert('ÈÄÅ‰ø°„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');
                    submitButton.disabled = false;
                    submitButton.textContent = 'ÂõûÁ≠î„ÇíÈÄÅ‰ø°';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('ÈÄÅ‰ø°„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');
                submitButton.disabled = false;
                submitButton.textContent = 'ÂõûÁ≠î„ÇíÈÄÅ‰ø°';
            });
        }
    </script>
</body>
</html>